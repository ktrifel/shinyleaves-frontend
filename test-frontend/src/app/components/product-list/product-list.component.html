<!-- src/app/components/product-list/product-list.component.html -->
<h2 class="page-title">Produkte</h2>

<div class="product-grid">
  <mat-card class="product-card" *ngFor="let product of products">
    <img mat-card-image
         [src]="'assets/images/' + product.slug + '.png'"
         alt="{{ product.name }}"
         (error)="onImgError($event)">

    <mat-card-title>{{ product.name }}</mat-card-title>
    <mat-card-content>
      <p><strong>Preis:</strong> {{ product.price | currency:'EUR' }}</p>
      <p *ngIf="product.genetic"><strong>Genetik:</strong> {{ product.genetic }}</p>
      <p *ngIf="product.thc"><strong>THC:</strong> {{ product.thc }}%</p>
      <p *ngIf="product.cbd"><strong>CBD:</strong> {{ product.cbd }}%</p>
      <p *ngIf="product.effect"><strong>Effekt:</strong> {{ product.effect }}</p>
    </mat-card-content>
    <mat-card-actions>
      <div class="button-container">
        <button mat-raised-button
                color="primary"
                (click)="addToCart(product)"
                [class.added-to-cart]="addingToCart[product.p_id]">
          <span *ngIf="!addingToCart[product.p_id]">In den Warenkorb</span>
          <span *ngIf="addingToCart[product.p_id]">✓ Hinzugefügt</span>
        </button>

        <button mat-button
                class="wishlist-button"
                color="accent"
                (click)="addToWishlist(product)"
                [class.in-wishlist]="isInWishlist(product.p_id)"
                [class.adding-to-wishlist]="addingToWishlist[product.p_id]"
                aria-label="Zum Merkzettel hinzufügen"
                matTooltip="Zum Merkzettel hinzufügen"
                matTooltipPosition="above"
        >
          Merkzettel
        </button>
      </div>
    </mat-card-actions>
  </mat-card>
</div>
